<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sliding Puzzle</title>
   <style>
    body {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
    background-color: #f4f4f4;
    font-family: Arial, sans-serif;
}

.puzzle-container {
    display: flex;
    flex-direction: column;
    align-items: center;
}

#puzzle {
    display: grid;
    grid-template-columns: repeat(3, 100px);
    grid-template-rows: repeat(3, 100px);
    gap: 2px;
}

.piece {
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: #ddd;
    border: 1px solid #aaa;
    font-size: 24px;
    cursor: pointer;
    transition: background-color 0.3s;
}

.piece:hover {
    background-color: #ccc;
}

.empty {
    background-color: transparent;
    cursor: default;
}

   </style>
</head>
<body>
    <div class="puzzle-container">
        <div id="puzzle">
            <!-- Puzzle pieces will be generated by JavaScript -->
        </div>
        <button onclick="shuffle()">Shuffle</button>
    </div>
    <script>const SIZE = 3;
        let puzzle = [];
        let emptyPos = { x: SIZE - 1, y: SIZE - 1 };
        
        function initPuzzle() {
            puzzle = Array.from({ length: SIZE }, (_, i) =>
                Array.from({ length: SIZE }, (_, j) => i * SIZE + j + 1)
            );
            puzzle[SIZE - 1][SIZE - 1] = 0; // Empty space
            renderPuzzle();
        }
        
        function renderPuzzle() {
            const puzzleContainer = document.getElementById('puzzle');
            puzzleContainer.innerHTML = ''; // Clear previous puzzle state
        
            puzzle.flat().forEach(value => {
                const piece = document.createElement('div');
                piece.className = 'piece';
                if (value === 0) {
                    piece.classList.add('empty');
                } else {
                    piece.textContent = value;
                    piece.addEventListener('click', () => handlePieceClick(value));
                }
                puzzleContainer.appendChild(piece);
            });
        }
        
        function handlePieceClick(value) {
            const { x, y } = findPosition(value);
            if (canMove(x, y)) {
                [puzzle[emptyPos.x][emptyPos.y], puzzle[x][y]] = [puzzle[x][y], puzzle[emptyPos.x][emptyPos.y]];
                emptyPos = { x, y };
                renderPuzzle();
            }
        }
        
        function findPosition(value) {
            for (let i = 0; i < SIZE; i++) {
                for (let j = 0; j < SIZE; j++) {
                    if (puzzle[i][j] === value) {
                        return { x: i, y: j };
                    }
                }
            }
            return { x: -1, y: -1 };
        }
        
        function canMove(x, y) {
            const dx = Math.abs(x - emptyPos.x);
            const dy = Math.abs(y - emptyPos.y);
            return (dx === 1 && dy === 0) || (dx === 0 && dy === 1);
        }
        
        function shuffle() {
            for (let i = 0; i < 100; i++) {
                const moves = getPossibleMoves();
                const move = moves[Math.floor(Math.random() * moves.length)];
                [puzzle[emptyPos.x][emptyPos.y], puzzle[move.x][move.y]] = [puzzle[move.x][move.y], puzzle[emptyPos.x][emptyPos.y]];
                emptyPos = move;
            }
            renderPuzzle();
        }
        
        function getPossibleMoves() {
            const moves = [];
            const directions = [
                { dx: 1, dy: 0 },
                { dx: -1, dy: 0 },
                { dx: 0, dy: 1 },
                { dx: 0, dy: -1 }
            ];
            directions.forEach(({ dx, dy }) => {
                const newX = emptyPos.x + dx;
                const newY = emptyPos.y + dy;
                if (newX >= 0 && newX < SIZE && newY >= 0 && newY < SIZE) {
                    moves.push({ x: newX, y: newY });
                }
            });
            return moves;
        }
        
        initPuzzle();
        </script>
</body>
</html>
